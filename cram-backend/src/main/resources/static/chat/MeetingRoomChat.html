<!--<!DOCTYPE html>-->
<!--<html lang="ko">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Socket.IO Meeting Chat</title>-->
<!--    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>-->
<!--</head>-->
<!--<body>-->
<!--<h2>ì±„íŒ… ì ‘ì†: ì´ë©”ì¼ë¡œ í† í° ë°œê¸‰ë°›ê¸° user1~user10@example.com</h2>-->

<!--<label for="email-input">EMAIL</label>-->
<!--<input type="email" id="email-input" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" value="user1@example.com"/>-->
<!--<label for="group-input">GROUP_ID</label>-->
<!--<input type="number" id="group-input" placeholder="ê·¸ë£¹ ID" min="1" value="1"/>-->
<!--<label for="meeting-room-input">MEETING_ROOM_ID</label>-->
<!--<input type="number" id="meeting-room-input" placeholder="ë¯¸íŒ…ë£¸ ID" min="1" value="1"/>-->
<!--<button onclick="connectWithEmail()">ì ‘ì†í•˜ê¸°</button>-->

<!--<div id="chat-ui" style="display: none; margin-top: 20px;">-->
<!--    <div id="chat-box" style="border: 1px solid #ccc; height: 300px; overflow-y: scroll; padding: 10px;"></div>-->
<!--    <input type="text" id="chat-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" />-->
<!--    <button onclick="sendTextMessage()">ì „ì†¡</button>-->
<!--</div>-->

<!--<script>-->
<!--    let socket = null;-->

<!--    async function connectWithEmail() {-->
<!--        disconnectSocket();-->

<!--        const email = document.getElementById("email-input").value.trim();-->
<!--        const groupId = document.getElementById("group-input").value.trim();-->
<!--        const meetingRoomId = document.getElementById("meeting-room-input").value.trim();-->

<!--        if (!email || !groupId || !meetingRoomId) {-->
<!--            alert("ì´ë©”ì¼, ê·¸ë£¹ ID, ë¯¸íŒ…ë£¸ IDë¥¼ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”.");-->
<!--            return;-->
<!--        }-->

<!--        try {-->
<!--            const res = await fetch(`/api/token?email=${email}&groupId=${groupId}`);-->
<!--            if (!res.ok) {-->
<!--                alert("í† í° ë°œê¸‰ ì‹¤íŒ¨");-->
<!--                return;-->
<!--            }-->

<!--            const { token } = await res.json();-->

<!--            // Socket.IO ì—°ê²°-->
<!--            // socket = io("ws://localhost/ws/v1/meetingroomchat", {-->
<!--            //     query: {-->
<!--            //         token: token,-->
<!--            //         groupId: groupId,-->
<!--            //         meetingRoomId: meetingRoomId-->
<!--            //     },-->
<!--            //     transports: ["websocket"]-->
<!--            // });-->
<!--            socket = io("wss://2a65-1-244-71-144.ngrok-free.app/ws/v1/meetingroomchat", {-->
<!--                query: {-->
<!--                    token: token,-->
<!--                    groupId: groupId,-->
<!--                    meetingRoomId: meetingRoomId-->
<!--                },-->
<!--                transports: ["websocket"]-->
<!--            });-->

<!--            socket.on("connect", () => {-->
<!--                console.log("âœ… Socket.IO ì—°ê²°ë¨");-->
<!--                document.getElementById("chat-ui").style.display = "block";-->

<!--                // ì„œë²„ì— join ìš”ì²­-->
<!--                socket.emit("join", { roomId: meetingRoomId });-->
<!--            });-->

<!--            socket.on("disconnect", () => {-->
<!--                console.log("ğŸ”Œ ì—°ê²° ì¢…ë£Œë¨");-->
<!--                document.getElementById("chat-ui").style.display = "none";-->
<!--            });-->

<!--            socket.on("message", (data) => {-->
<!--                console.log("ğŸ“© ìˆ˜ì‹ :", data);-->
<!--                displayMessage(data);-->
<!--            });-->

<!--            socket.on("connect_error", (err) => {-->
<!--                console.error("âŒ ì—°ê²° ì‹¤íŒ¨:", err.message);-->
<!--            });-->

<!--        } catch (e) {-->
<!--            console.error("ì—°ê²° ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", e);-->
<!--        }-->
<!--    }-->

<!--    function sendTextMessage() {-->
<!--        const input = document.getElementById("chat-input");-->
<!--        const message = input.value.trim();-->
<!--        if (!message || !socket || !socket.connected) return;-->

<!--        const tempId = Math.random().toString(36).substring(2, 8);-->

<!--        const payload = {-->
<!--            type: "text",-->
<!--            message: message,-->
<!--            image: null,-->
<!--            tempId: tempId-->
<!--        };-->

<!--        socket.emit("message", payload, (ack) => {-->
<!--            console.log("âœ… ì„œë²„ ì‘ë‹µ:", ack);-->
<!--        });-->

<!--        input.value = "";-->
<!--    }-->

<!--    function displayMessage(data) {-->
<!--        const chatBox = document.getElementById("chat-box");-->

<!--        const msgDiv = document.createElement("div");-->
<!--        msgDiv.className = "chat-message";-->
<!--        msgDiv.style.marginBottom = "10px";-->

<!--        const profileHtml = `-->
<!--            <img src="${data.senderProfileUrl || ''}" style="width: 30px; height: 30px; border-radius: 50%; vertical-align: middle; margin-right: 5px;">-->
<!--            <strong>${data.senderName}</strong>-->
<!--            <small style="color: gray;">${new Date(data.createdAt).toLocaleString()}</small>-->
<!--        `;-->

<!--        let contentHtml = "";-->
<!--        if (data.messageType === "text") {-->
<!--            contentHtml = `<p>${data.message}</p>`;-->
<!--        } else if (data.messageType === "image") {-->
<!--            contentHtml = `<img src="${data.imageUrl}" style="max-width: 200px;">`;-->
<!--        }-->

<!--        msgDiv.innerHTML = `${profileHtml}<br>${contentHtml}`;-->
<!--        chatBox.appendChild(msgDiv);-->
<!--        chatBox.scrollTop = chatBox.scrollHeight;-->
<!--    }-->

<!--    function disconnectSocket() {-->
<!--        if (socket && socket.connected) {-->
<!--            socket.disconnect();-->
<!--            console.log("ğŸ”Œ ìˆ˜ë™ ì—°ê²° ì¢…ë£Œ");-->
<!--            document.getElementById("chat-ui").style.display = "none";-->
<!--        }-->
<!--    }-->
<!--</script>-->
<!--</body>-->
<!--</html>-->
